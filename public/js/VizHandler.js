var VizHandler=function(){function s(){events.on("update",f);n=new THREE.WebGLRenderer({antialias:!1});n.setSize(800,600);n.setClearColor(0);n.sortObjects=!1;$("#viz").append(n.domElement);t=new THREE.PerspectiveCamera(70,800/600,1,3e3);t.position.z=1e3;i=new THREE.Scene;i.add(t);i.fog=new THREE.Fog(0,2e3,3e3);r=new THREE.Object3D;i.add(r);activeViz=[Bars,WhiteRing];activeVizCount=activeViz.length;for(var u=0;u<activeVizCount;u++)activeViz[u].init()}function f(){e+=.01}function h(){var i,r;ControlsHandler.vizParams.fullSize?(i=window.innerWidth,r=window.innerHeight,ControlsHandler.vizParams.showControls&&(i-=250),$("#viz").css({top:0})):(i=o,r=u,$("#viz").css({top:window.innerHeight/2-u/2}));t.aspect=i/r;t.updateProjectionMatrix();n.setSize(i,r)}var e=0,t,i,n,r,o=800,u=600;return{init:s,update:f,getVizHolder:function(){return r},getCamera:function(){return t},getScene:function(){return i},getRenderer:function(){return n},onResize:h}}();