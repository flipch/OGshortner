THREE.EffectComposer=function(n,t){if(this.renderer=n,t===undefined){var i=window.innerWidth||1,r=window.innerHeight||1,u={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,stencilBuffer:!1};t=new THREE.WebGLRenderTarget(i,r,u)}this.renderTarget1=t;this.renderTarget2=t.clone();this.writeBuffer=this.renderTarget1;this.readBuffer=this.renderTarget2;this.passes=[];THREE.CopyShader===undefined&&console.error("THREE.EffectComposer relies on THREE.CopyShader");this.copyPass=new THREE.ShaderPass(THREE.CopyShader)};THREE.EffectComposer.prototype={swapBuffers:function(){var n=this.readBuffer;this.readBuffer=this.writeBuffer;this.writeBuffer=n},addPass:function(n){this.passes.push(n)},insertPass:function(n,t){this.passes.splice(t,0,n)},render:function(n){var i,t,u,f,r;for(this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,i=!1,f=this.passes.length,u=0;u<f;u++)(t=this.passes[u],t.enabled)&&(t.render(this.renderer,this.writeBuffer,this.readBuffer,n,i),t.needsSwap&&(i&&(r=this.renderer.context,r.stencilFunc(r.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,n),r.stencilFunc(r.EQUAL,1,4294967295)),this.swapBuffers()),t instanceof THREE.MaskPass?i=!0:t instanceof THREE.ClearMaskPass&&(i=!1))},reset:function(n){n===undefined&&(n=this.renderTarget1.clone(),n.width=window.innerWidth,n.height=window.innerHeight);this.renderTarget1=n;this.renderTarget2=n.clone();this.writeBuffer=this.renderTarget1;this.readBuffer=this.renderTarget2},setSize:function(n,t){var i=this.renderTarget1.clone();i.width=n;i.height=t;this.reset(i)}};THREE.EffectComposer.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1);THREE.EffectComposer.quad=new THREE.Mesh(new THREE.PlaneGeometry(2,2),null);THREE.EffectComposer.scene=new THREE.Scene;THREE.EffectComposer.scene.add(THREE.EffectComposer.quad);